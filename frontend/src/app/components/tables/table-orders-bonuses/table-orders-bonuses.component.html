<div class="bg-[#FCE8BA] font-sans text-gray-800 border-2 border-black rounded-lg">
  <div class="policy-container content-center border">
    <div class="bg-black rounded-t-lg">
      <div [ngClass]="{
        'grid-cols-7': userRole === 0,
        'grid-cols-6': userRole !== 0
      }" class="grid gap-2 text-center text-yellow-50 font-bold text-lg mb-6 px-2 mx-2">
        <span class="heading">Name of product</span>
        <span class="heading">Client</span>
        <span class="heading">Client ranking</span>
        <span class="heading">Items</span>
        <span class="heading">Initial bonus</span>
        <span class="heading">Current bonus</span>
        <span class="heading" *ngIf="userRole === 0">Change bonus</span>
      </div>
    </div>


    <div *ngFor="let bonuse of bonuses.ordersBonuses | paginate: pagingConfig; let i = index"
    [ngClass]="{
      'grid-cols-7': userRole === 0,
      'grid-cols-6': userRole !== 0
    }"
      class="policy grid gap-4 items-center py-2 px-2 rounded-lg shadow-md mb-4 mx-2 mx-2hover:shadow-lg transition-shadow border-2 border-black text-base bg-[#D9D9D9]">

      <span class="flex-1 text-center">{{ bonuse.productName }}</span>

      <span class="flex-1 text-center">{{ bonuse.clientFullName }}</span>

      <span class="flex-1 text-center">{{ bonuse.clientRating }}</span>

      <span class="flex-1 text-center">{{ bonuse.items }}</span>

      <span class="flex-1 text-center">{{ bonuse.initialBonus }}</span>

      <ng-container *ngIf="isEditing[i] && userRole === 0">
        <span class="flex-1 text-center ">
          <input class="border-2 border-black bg-slate-100 mx-4 text-center w-1/2 py-1 rounded-md"
          [(ngModel)]="bonuse.bonus"
          >
          <svg 
          (click)="saveEdit(i)"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 mx-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
          </svg>   

          <svg 
          (click)="cancelEdit(bonuse,i)"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
          </svg>
        </span>
      </ng-container>

      <ng-container *ngIf="!isEditing[i] && userRole === 0">
        <span class="flex-1 text-center">{{ bonuse.bonus }} 
          <svg
          (click)="isEditing[i]=true"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 ml-1 transition-all duration-300 ease-in-out hover:scale-105 ">
            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
          </svg>
        </span>
      </ng-container>
    </div>
    <div class="flex justify-center mt-4">
      <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="onTableDataChange($event)">
      </pagination-controls>
    </div>
  </div>
</div>
<div *ngIf="bonuses" class="flex justify-end mt-4 items-center">

  <label class="text-base mr-2 font-semiboldw">Total order bonus:</label>
  <label class="py-2 px-4 border-2 border-black bg-slate-100 text-base font-semibold min-w-24 rounded-md text-center"
    [textContent]="getOrderBonusesTotal()">
  </label>
</div>

<div class="mt-4 flex justify-end"
  *ngIf="userRole === 0">
  <button
    class="bg-green-400 rounded-lg p-2 w-24 transition-all duration-300 ease-in-out hover:bg-green-500 hover:scale-105"
    (click)="saveSalesBonuses()">
    Save</button>
</div>
